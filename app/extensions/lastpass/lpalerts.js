var g_alert_set=0;
function rich_notification(a){var e=a.lpa_title,b=a.lpa_iconurl,f=a.lpa_id,d=a.lpa_onclicktext,c=a.lpa_onclickurl,g=a.lpa_msg,h=a.lpa_breachunlock;localStorage.setItem(g_username+"-breach_ids",f);handle_notification_click=function(a,b){1==b?chrome.notifications.clear(a):0==g_alert_set&&(g_alert_set=1,h&&unlock_plug2web(),openURL(c),setTimeout(function(){g_alert_set=0},1E3))};g_ischrome&&"undefined"!=typeof chrome.notifications?chrome.notifications.create("rich"+f,{type:"basic",title:e,message:g,iconUrl:b,
priority:2,buttons:[{title:d},{title:"Dismiss"}]},function(){chrome.notifications.onButtonClicked.addListener(handle_notification_click)}):(g_alert_set=1,handlenotifications(e,g,c))}
function handle_new_alerts(a){var e=g_username+"-breach_ids";alert_response={};for(var b in a.attributes)alert_response[a.attributes[b].name]=a.attributes[b].value;a=alert_response.lpa_breachonlyifaffected;var f=alert_response.lpa_breach,d=alert_response.lpa_breachurl,c=alert_response.lpa_breachhasrecipe;if(d&&c){c=!1;for(b in g_sites)lp_gettld_url(g_sites[b].url)==lp_gettld_url(d)&&(g_sites[b].pwch="1",c=!0);c&&rewritelocalfile()}c=!0;if(""!=d&&"1"==a&&"1"==f)for(b in c=!1,g_sites)if(lp_gettld_url(g_sites[b].url)==
lp_gettld_url(d)){c=!0;break}c&&!("undefined"!==typeof localStorage[e]&&alert_response.lpa_id==localStorage[e])&&(!0==alert_response.lpa_rich&&rich_notification(alert_response),!0==alert_response.lpa_toolbar&&(g_notification_type="lpalert",g_badgedata={cmd:"notification",type:g_notification_type},g_notification_data={data:alert_response,cmd:"notification",type:"lpalert"},set_badge(g_notification_data,getcurrenttabid()),drawIconAtRotation(0),sendTS(g_badgedata)))};
