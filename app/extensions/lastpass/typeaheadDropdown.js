TypeaheadDropdown=function(a,b,d){this.hint=this.hintElement=null;this.autoCompleteBlurs=LPTools.getOption(d,"autoCompleteBlurs",!0);DropdownInput.call(this,a,b,d);var c=this;$(a).bind("keydown",function(a){if(c.dropdownEnabled)switch(a.keyCode||a.which){case 9:c.autocomplete(a);break;case 27:c.shown&&(c.hide(),a.stopPropagation(),a.preventDefault())}})};TypeaheadDropdown.prototype=Object.create(DropdownInput.prototype);TypeaheadDropdown.prototype.constructor=TypeaheadDropdown;
TypeaheadDropdown.prototype.build=function(a){DropdownInput.prototype.build.apply(this,arguments);this.hintElement=LPTools.createElement("div","dropdownHint");var b=LPTools.createElement("div","relative");a.parentElement.insertBefore(b,a);b.appendChild(this.hintElement);b.appendChild(a)};TypeaheadDropdown.prototype.autocomplete=function(a){this.hint&&(this.setValue(this.hint.value),this.autoCompleteBlurs||(a.preventDefault(),a.stopPropagation()))};TypeaheadDropdown.prototype.getDropdownClass=function(){return"typeaheadDropdown"};
TypeaheadDropdown.prototype.clear=function(){DropdownInput.prototype.clear.apply(this,arguments);this.dynamic&&this.setOptions([])};TypeaheadDropdown.prototype.default=function(){DropdownInput.prototype.default.apply(this,arguments);this.updateDropdown("")};TypeaheadDropdown.prototype.hide=function(){DropdownInput.prototype.hide.apply(this);this.clearHint()};
TypeaheadDropdown.prototype.setHint=function(a,b){0<a.length?(this.hintElement.textContent=a+b.label.substring(Math.min(a.length,b.label.length)),this.hint=b):this.clearHint()};TypeaheadDropdown.prototype.clearHint=function(){this.hintElement.textContent="";this.hint=null};TypeaheadDropdown.prototype.handleKeypress=function(a){this.updateDropdown(this.inputObject.getValue()+a)};TypeaheadDropdown.prototype.handleDelete=function(){this.updateDropdown(this.inputObject.getValue())};
TypeaheadDropdown.prototype.handleDownArrow=function(){this.show();LPTools.setNavIndex(0)};TypeaheadDropdown.prototype.updateDropdown=function(a){var b=!1,d=!1,c=this.dropdownElement.children[0];LPTools.removeDOMChildren(c);for(var f in this.options){var e=this.options[f];this.queryMatches(e,a,!0)&&(c.appendChild(e.element),d=!0,!b&&this.queryMatches(e,a)&&(this.setHint(a,e),b=!0))}b||this.clearHint();d?this.shown?this.addKeyBoardNavigation():a&&this.show():this.hide()};
